"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["nosto-integration"],{8553:(t,e,i)=>{i.d(e,{Du:()=>c,UK:()=>u,ZP:()=>h});var s=i(6285),n=i(7606),r=i(2615),o=i(3637),a=i(8254),l=i(4690);const c="CookieConfiguration_Update",u="CookieConfiguration_CloseOffCanvas";class h extends s.Z{init(){this.lastState={active:[],inactive:[]},this._httpClient=new a.Z,this._registerEvents()}_registerEvents(){const{submitEvent:t,buttonOpenSelector:e,customLinkSelector:i,globalButtonAcceptAllSelector:s}=this.options;Array.from(document.querySelectorAll(e)).forEach((e=>{e.addEventListener(t,this.openOffCanvas.bind(this))})),Array.from(document.querySelectorAll(i)).forEach((e=>{e.addEventListener(t,this._handleCustomLink.bind(this))})),Array.from(document.querySelectorAll(s)).forEach((e=>{e.addEventListener(t,this._acceptAllCookiesFromCookieBar.bind(this))}))}_registerOffCanvasEvents(){const{submitEvent:t,buttonSubmitSelector:e,buttonAcceptAllSelector:i,wrapperToggleSelector:s}=this.options,r=this._getOffCanvas();if(r){const o=r.querySelector(e),a=r.querySelector(i),l=Array.from(r.querySelectorAll('input[type="checkbox"]')),c=Array.from(r.querySelectorAll(s));o&&o.addEventListener(t,this._handleSubmit.bind(this,n.Z)),a&&a.addEventListener(t,this._acceptAllCookiesFromOffCanvas.bind(this,n.Z)),l.forEach((e=>{e.addEventListener(t,this._handleCheckbox.bind(this))})),c.forEach((e=>{e.addEventListener(t,this._handleWrapperTrigger.bind(this))}))}}_handleCustomLink(t){t.preventDefault(),this.openOffCanvas()}_handleUpdateListener(t,e){const i=this._getUpdatedCookies(t,e);document.$emitter.publish(c,i)}_getUpdatedCookies(t,e){const{lastState:i}=this,s={};return t.forEach((t=>{i.inactive.includes(t)&&(s[t]=!0)})),e.forEach((t=>{i.active.includes(t)&&(s[t]=!1)})),s}openOffCanvas(t){const{offCanvasPosition:e}=this.options,i=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),r.Z.open(i,!1,this._onOffCanvasOpened.bind(this,t),e)}closeOffCanvas(t){r.Z.close(),"function"==typeof t&&t()}_onOffCanvasOpened(t){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof t&&t()}_hideCookieBar(){const t=PluginManager.getPluginInstances("CookiePermission");t&&t[0]&&(t[0]._hideCookieBar(),t[0]._removeBodyPadding())}_setInitialState(t=null){const e=t||this._getCookies("all"),i=[],s=[];e.forEach((({cookie:t,required:e})=>{n.Z.getItem(t)||e?i.push(t):s.push(t)})),this.lastState={active:i,inactive:s}}_setInitialOffcanvasState(){const t=this.lastState.active,e=this._getOffCanvas();t.forEach((t=>{const i=e.querySelector(`[data-cookie="${t}"]`);i.checked=!0,this._childCheckboxEvent(i)}))}_handleWrapperTrigger(t){t.preventDefault();const{entriesActiveClass:e,entriesClass:i,groupClass:s}=this.options,{target:n}=t,r=this._findParentEl(n,i,s);if(r){r.classList.contains(e)?r.classList.remove(e):r.classList.add(e)}}_handleCheckbox(t){const{parentInputClass:e}=this.options,{target:i}=t;(i.classList.contains(e)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,i)}_findParentEl(t,e,i=null){for(;t&&!t.classList.contains(i);){if(t.classList.contains(e))return t;t=t.parentElement}return null}_isChecked(t){return!!t.checked}_parentCheckboxEvent(t){const{groupClass:e}=this.options,i=this._isChecked(t),s=this._findParentEl(t,e);this._toggleWholeGroup(i,s)}_childCheckboxEvent(t){const{groupClass:e}=this.options,i=this._isChecked(t),s=this._findParentEl(t,e);this._toggleParentCheckbox(i,s)}_toggleWholeGroup(t,e){Array.from(e.querySelectorAll("input")).forEach((e=>{e.checked=t}))}_toggleParentCheckbox(t,e){const{parentInputSelector:i}=this.options,s=Array.from(e.querySelectorAll(`input:not(${i})`)),n=Array.from(e.querySelectorAll(`input:not(${i}):checked`));if(s.length>0){const t=e.querySelector(i);if(t){const e=n.length>0,i=e&&n.length!==s.length;t.checked=e,t.indeterminate=i}}}_handleSubmit(){const t=this._getCookies("active"),e=this._getCookies("inactive"),{cookiePreference:i}=this.options,s=[],r=[];e.forEach((({cookie:t})=>{r.push(t),n.Z.getItem(t)&&n.Z.removeItem(t)})),t.forEach((({cookie:t,value:e,expiration:i})=>{s.push(t),t&&e&&n.Z.setItem(t,e,i)})),n.Z.setItem(i,"1","30"),this._handleUpdateListener(s,r),this.closeOffCanvas(document.$emitter.publish(u))}acceptAllCookies(t=!1){if(!t)return this._handleAcceptAll(),void this.closeOffCanvas();l.Z.create(this.el);const e=window.router["frontend.cookie.offcanvas"];this._httpClient.get(e,(t=>{const e=(new DOMParser).parseFromString(t,"text/html");this._handleAcceptAll(e),l.Z.remove(this.el),this._hideCookieBar()}))}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(t=null){const e=this._getCookies("all",t);this._setInitialState(e);const{cookiePreference:i}=this.options;e.forEach((({cookie:t,value:e,expiration:i})=>{t&&e&&n.Z.setItem(t,e,i)})),n.Z.setItem(i,"1","30"),this._handleUpdateListener(e.map((({cookie:t})=>t)),[])}_getCookies(t="all",e=null){const{cookieSelector:i}=this.options;return e||(e=this._getOffCanvas()),Array.from(e.querySelectorAll(i)).filter((e=>{switch(t){case"all":return!0;case"active":return this._isChecked(e);case"inactive":return!this._isChecked(e);default:return!1}})).map((t=>{const{cookie:e,cookieValue:i,cookieExpiration:s,cookieRequired:n}=t.dataset;return{cookie:e,value:i,expiration:s,required:n}}))}_getOffCanvas(){const t=o.Z?o.Z.getOffCanvas():[];return!!(t&&t.length>0)&&t[0]}}var p,d,f;p=h,d="options",f={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"},(d=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(d))in p?Object.defineProperty(p,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):p[d]=f},6536:(t,e,i)=>{i.d(e,{Z:()=>l});var s,n,r,o=i(6285),a=i(3206);class l extends o.Z{_init(){super._init(),this._validateMethods();const t=a.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(t,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){const t=a.Z.querySelector(this.el,this.options.dropdownSelector,!1);t&&t.addEventListener("click",(t=>{t.stopPropagation()}))}_validateMethods(){if("function"!=typeof this.getValues)throw new Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw new Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw new Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw new Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}s=l,r={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r},5410:(t,e,i)=>{i.d(e,{Z:()=>h});var s,n,r,o=i(3206),a=i(1966),l=i(6536),c=i(1857),u=i.n(c);class h extends l.Z{init(){this.selection=[],this.counter=o.Z.querySelector(this.el,this.options.countSelector),this._registerEvents()}_registerEvents(){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);a.Z.iterate(t,(t=>{t.addEventListener("change",this._onChangeFilter.bind(this))}))}getValues(){const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];t?a.Z.iterate(t,(t=>{e.push(t.id)})):e=[],this.selection=e,this._updateCount();const i={};return i[this.options.name]=e,i}getLabels(){const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];return t?a.Z.iterate(t,(t=>{e.push({label:t.dataset.label,id:t.id})})):e=[],e}setValuesFromUrl(t={}){let e=!1;const i=t[this.options.name],s=i?i.split("|"):[],n=this.selection.filter((t=>!s.includes(t))),r=s.filter((t=>!this.selection.includes(t)));return(n.length>0||r.length>0)&&(e=!0),r.forEach((t=>{const e=o.Z.querySelector(this.el,`[id="${t}"]`,!1);e&&(e.checked=!0,this.selection.push(e.id))})),n.forEach((t=>{this.reset(t),this.selection=this.selection.filter((e=>e!==t))})),this._updateCount(),e}_onChangeFilter(){this.listing.changeListing(!0,{p:1})}reset(t){const e=o.Z.querySelector(this.el,`[id="${t}"]`,!1);e&&(e.checked=!1)}resetAll(){this.selection.filter=[];const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);t&&a.Z.iterate(t,(t=>{t.checked=!1}))}refreshDisabledState(t){const e=t[this.options.name];!e.entities||e.entities.length<1?this.disableFilter():(this.enableFilter(),this._disableInactiveFilterOptions(e.entities.map((t=>t.id))))}_disableInactiveFilterOptions(t){const e=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);a.Z.iterate(e,(e=>{!0!==e.checked&&(t.includes(e.id)?this.enableOption(e):this.disableOption(e))}))}disableOption(t){const e=t.closest(this.options.listItemSelector);e.classList.add("disabled"),e.setAttribute("title",this.options.snippets.disabledFilterText),t.disabled=!0}enableOption(t){const e=t.closest(this.options.listItemSelector);e.removeAttribute("title"),e.classList.remove("disabled"),t.disabled=!1}enableAllOptions(){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);a.Z.iterate(t,(t=>{this.enableOption(t)}))}disableFilter(){const t=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.add("disabled"),t.setAttribute("disabled","disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){const t=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.remove("disabled"),t.removeAttribute("disabled"),t.removeAttribute("title")}_updateCount(){this.counter.innerText=this.selection.length?`(${this.selection.length})`:""}}s=h,n="options",r=u()(l.Z.options,{checkboxSelector:".filter-multi-select-checkbox",countSelector:".filter-multi-select-count",listItemSelector:".filter-multi-select-list-item",snippets:{disabledFilterText:"Filter not active"},mainFilterButtonSelector:".filter-panel-item-toggle"}),(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r},3629:(t,e,i)=>{i.d(e,{Z:()=>h});var s,n,r,o=i(5410),a=i(1966),l=i(3206),c=i(1857),u=i.n(c);class h extends o.Z{getLabels(){const t=l.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];return t?a.Z.iterate(t,(t=>{e.push({label:t.dataset.label,id:t.id,previewHex:t.dataset.previewHex,previewImageUrl:t.dataset.previewImageUrl})})):e=[],e}refreshDisabledState(t){if(""===this.options.propertyName)return;const e=[],i=t[this.options.name].entities;if(!i)return void this.disableFilter();const s=i.find((t=>t.translated.name===this.options.propertyName));if(!s)return void this.disableFilter();e.push(...s.options);const n=this.getValues();e.length<1&&0===n.properties.length?this.disableFilter():(this.enableFilter(),n.properties.length>0||this._disableInactiveFilterOptions(e.map((t=>t.id))))}}s=h,n="options",r=u()(o.Z.options,{propertyName:""}),(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r},4699:(t,e,i)=>{i.d(e,{Z:()=>u});var s,n,r,o=i(6536),a=i(3206),l=i(1857),c=i.n(l);class u extends o.Z{init(){this._container=a.Z.querySelector(this.el,this.options.containerSelector),this._inputMin=a.Z.querySelector(this.el,this.options.inputMinSelector),this._inputMax=a.Z.querySelector(this.el,this.options.inputMaxSelector),this._timeout=null,this._hasError=!1,this._registerEvents()}_registerEvents(){this._inputMin.addEventListener("input",this._onChangeInput.bind(this)),this._inputMax.addEventListener("input",this._onChangeInput.bind(this))}_onChangeInput(){clearTimeout(this._timeout),this._timeout=setTimeout((()=>{this._isInputInvalid()?this._setError(this._getErrorMessageTemplate("filterRangeErrorMessage")):this._isInputLowerBoundInvalid()?this._setError(this._getErrorMessageTemplate("filterRangeLowerBoundErrorMessage")):this._removeError(),this.listing.changeListing()}),this.options.inputTimeout)}getValues(){const t={};return t[this.options.minKey]=this._inputMin.value,t[this.options.maxKey]=this._inputMax.value,t}_isInputInvalid(){return parseFloat(this._inputMin.value)>parseFloat(this._inputMax.value)}_isInputLowerBoundInvalid(){return parseFloat(this._inputMin.value)<this.options.lowerBound||parseFloat(this._inputMax.value)<this.options.lowerBound}_getErrorMessageTemplate(t){return`<div class="${this.options.errorContainerClass}">${this.options.snippets[t]}</div>`}_setError(t){this._hasError||(this._inputMin.classList.add(this.options.inputInvalidCLass),this._inputMax.classList.add(this.options.inputInvalidCLass),this._container.insertAdjacentHTML("afterend",t),this._hasError=!0)}_removeError(){this._inputMin.classList.remove(this.options.inputInvalidCLass),this._inputMax.classList.remove(this.options.inputInvalidCLass);const t=a.Z.querySelector(this.el,`.${this.options.errorContainerClass}`,!1);t&&t.remove(),this._hasError=!1}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach((i=>{i===this.options.minKey&&(this._inputMin.value=t[i],e=!0),i===this.options.maxKey&&(this._inputMax.value=t[i],e=!0)})),e}getLabels(){let t=[];return this._inputMin.value.length||this._inputMax.value.length?(this._inputMin.value.length&&t.push({label:`${this.options.snippets.filterRangeActiveMinLabel} ${this._inputMin.value} ${this.options.unit}`,id:this.options.minKey}),this._inputMax.value.length&&t.push({label:`${this.options.snippets.filterRangeActiveMaxLabel} ${this._inputMax.value} ${this.options.unit}`,id:this.options.maxKey})):t=[],t}reset(t){t===this.options.minKey&&(this._inputMin.value=""),t===this.options.maxKey&&(this._inputMax.value=""),this._removeError()}resetAll(){this._inputMin.value="",this._inputMax.value="",this._removeError()}}s=u,n="options",r=c()(o.Z.options,{inputMinSelector:".min-input",inputMaxSelector:".max-input",inputInvalidCLass:"is-invalid",inputTimeout:500,minKey:"min-price",maxKey:"max-price",lowerBound:0,unit:"€",errorContainerClass:"filter-range-error",containerSelector:".filter-range-container",snippets:{filterRangeActiveMinLabel:"",filterRangeActiveMaxLabel:"",filterRangeErrorMessage:"",filterRangeLowerBoundErrorMessage:""}}),(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r},3139:(t,e,i)=>{i.d(e,{Z:()=>f});var s,n,r,o=i(6285),a=i(8254),l=i(1966),c=i(3206),u=i(5944),h=i(5362),p=i(6510),d=i(46);class f extends o.Z{init(){this._registry=[],this.httpClient=new a.Z,this._urlFilterParams=u.parse(p.Z.getSearch()),this._filterPanel=c.Z.querySelector(document,this.options.filterPanelSelector,!1),this._filterPanelActive=!!this._filterPanel,this._filterPanelActive&&(this._showResetAll=!1,this.activeFilterContainer=c.Z.querySelector(document,this.options.activeFilterContainerSelector)),this._cmsProductListingWrapper=c.Z.querySelector(document,this.options.cmsProductListingWrapperSelector,!1),this._cmsProductListingWrapperActive=!!this._cmsProductListingWrapper,this._allFiltersInitializedDebounce=d.Z.debounce(this.sendDisabledFiltersRequest.bind(this),100),this._registerEvents()}refreshRegistry(){const t=this._registry.filter((t=>document.body.contains(t.el)));this.init(),this._registry=t,window.PluginManager.initializePlugins()}changeListing(t=!0,e={}){this._buildRequest(t,e),this._filterPanelActive&&this._buildLabels()}registerFilter(t){this._registry.push(t),this._setFilterState(t),this.options.disableEmptyFilter&&this._allFiltersInitializedDebounce()}_setFilterState(t){if(Object.keys(this._urlFilterParams).length>0&&"function"==typeof t.setValuesFromUrl){if(!t.setValuesFromUrl(this._urlFilterParams)||!this._filterPanelActive)return;this._showResetAll=!0,this._buildLabels()}}deregisterFilter(t){this._registry=this._registry.filter((e=>e!==t))}_fetchValuesOfRegisteredFilters(){const t={};return this._registry.forEach((e=>{const i=e.getValues();Object.keys(i).forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)?Object.values(i[e]).forEach((i=>{t[e].push(i)})):t[e]=i[e]}))})),t}_mapFilters(t){const e={};return Object.keys(t).forEach((i=>{let s=t[i];Array.isArray(s)&&(s=s.join("|"));`${s}`.length&&(e[i]=s)})),e}_buildRequest(t=!0,e={}){const i=this._fetchValuesOfRegisteredFilters(),s=this._mapFilters(i);this._filterPanelActive&&(this._showResetAll=!!Object.keys(s).length),this.options.params&&Object.keys(this.options.params).forEach((t=>{s[t]=this.options.params[t]})),Object.entries(e).forEach((([t,e])=>{s[t]=e}));let n=u.stringify(s);this.sendDataRequest(n),delete s.slots,delete s["no-aggregations"],delete s["reduce-aggregations"],delete s["only-aggregations"],n=u.stringify(s),t&&this._updateHistory(n),this.options.scrollTopListingWrapper&&this._scrollTopOfListing()}_scrollTopOfListing(){const t=this._cmsProductListingWrapper.getBoundingClientRect();if(t.top>=0)return;const e=t.top+window.scrollY-this.options.scrollOffset;window.scrollTo({top:e,behavior:"smooth"})}_getDisabledFiltersParamsFromParams(t){const e=Object.assign({},{"only-aggregations":1,"reduce-aggregations":1},t);return delete e.p,delete e.order,delete e["no-aggregations"],e}_updateHistory(t){p.Z.push(p.Z.getLocation().pathname,t,{})}_buildLabels(){let t="";this._registry.forEach((e=>{const i=e.getLabels();i.length&&i.forEach((e=>{t+=this.getLabelTemplate(e)}))})),this.activeFilterContainer.innerHTML=t;const e=c.Z.querySelectorAll(this.activeFilterContainer,`.${this.options.activeFilterLabelRemoveClass}`,!1);t.length&&(this._registerLabelEvents(e),this.createResetAllButton())}_registerLabelEvents(t){l.Z.iterate(t,(t=>{t.addEventListener("click",(()=>this.resetFilter(t)))}))}createResetAllButton(){this.activeFilterContainer.insertAdjacentHTML("beforeend",this.getResetAllButtonTemplate());const t=c.Z.querySelector(this.activeFilterContainer,this.options.resetAllFilterButtonSelector);t.removeEventListener("click",this.resetAllFilter.bind(this)),t.addEventListener("click",this.resetAllFilter.bind(this)),this._showResetAll||t.remove()}resetFilter(t){this._registry.forEach((e=>{e.reset(t.dataset.id)})),this._buildRequest(),this._buildLabels()}resetAllFilter(){this._registry.forEach((t=>{t.resetAll()})),this._buildRequest(),this._buildLabels()}getLabelTemplate(t){return`\n        <span class="${this.options.activeFilterLabelClass}">\n            ${this.getLabelPreviewTemplate(t)}\n            ${t.label}\n            <button class="${this.options.activeFilterLabelRemoveClass}"\n                    data-id="${t.id}">\n                &times;\n            </button>\n        </span>\n        `}getLabelPreviewTemplate(t){const e=this.options.activeFilterLabelPreviewClass;return t.previewHex?`\n                <span class="${e}" style="background-color: ${t.previewHex};"></span>\n            `:t.previewImageUrl?`\n                <span class="${e}" style="background-image: url('${t.previewImageUrl}');"></span>\n            `:""}getResetAllButtonTemplate(){return`\n        <button class="${this.options.resetAllFilterButtonClasses}">\n            ${this.options.snippets.resetAllButtonText}\n        </button>\n        `}addLoadingIndicatorClass(){this._filterPanel.classList.add(this.options.loadingIndicatorClass)}removeLoadingIndicatorClass(){this._filterPanel.classList.remove(this.options.loadingIndicatorClass)}addLoadingElementLoaderClass(){this._cmsProductListingWrapper.classList.add(this.options.loadingElementLoaderClass)}removeLoadingElementLoaderClass(){this._cmsProductListingWrapper.classList.remove(this.options.loadingElementLoaderClass)}sendDataRequest(t){this._filterPanelActive&&this.addLoadingIndicatorClass(),this._cmsProductListingWrapperActive&&this.addLoadingElementLoaderClass(),this.options.disableEmptyFilter&&this.sendDisabledFiltersRequest(),this.httpClient.get(`${this.options.dataUrl}?${t}`,(t=>{this.renderResponse(t),this._filterPanelActive&&this.removeLoadingIndicatorClass(),this._cmsProductListingWrapperActive&&this.removeLoadingElementLoaderClass()}))}sendDisabledFiltersRequest(){const t=this._fetchValuesOfRegisteredFilters(),e=this._mapFilters(t);this.options.params&&Object.keys(this.options.params).forEach((t=>{e[t]=this.options.params[t]})),this._allFiltersInitializedDebounce=()=>{};const i=this._getDisabledFiltersParamsFromParams(e);this.httpClient.get(`${this.options.filterUrl}?${u.stringify(i)}`,(t=>{const e=JSON.parse(t);this._registry.forEach((t=>{"function"==typeof t.refreshDisabledState&&t.refreshDisabledState(e,i)}))}))}renderResponse(t){h.Z.replaceFromMarkup(t,this.options.cmsProductListingSelector,!1),this._registry.forEach((t=>{"function"==typeof t.afterContentChange&&t.afterContentChange()})),window.PluginManager.initializePlugins(),this.$emitter.publish("Listing/afterRenderResponse",{response:t})}_registerEvents(){window.onpopstate=this._onWindowPopstate.bind(this)}_onWindowPopstate(){this.refreshRegistry(),this._registry.forEach((t=>{0===Object.keys(this._urlFilterParams).length&&(this._urlFilterParams.p=1),this._setFilterState(t)})),this.options.disableEmptyFilter&&this._allFiltersInitializedDebounce(),this.changeListing(!1)}}s=f,r={dataUrl:"",filterUrl:"",params:{},filterPanelSelector:".filter-panel",cmsProductListingSelector:".cms-element-product-listing",cmsProductListingWrapperSelector:".cms-element-product-listing-wrapper",activeFilterContainerSelector:".filter-panel-active-container",activeFilterLabelClass:"filter-active",activeFilterLabelRemoveClass:"filter-active-remove",activeFilterLabelPreviewClass:"filter-active-preview",resetAllFilterButtonClasses:"filter-reset-all btn btn-sm btn-outline-danger",resetAllFilterButtonSelector:".filter-reset-all",loadingIndicatorClass:"is-loading",loadingElementLoaderClass:"has-element-loader",disableEmptyFilter:!1,snippets:{resetAllButtonText:"Reset all"},scrollTopListingWrapper:!0,scrollOffset:15},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r},2615:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(3637),n=i(8254),r=i(7906);let o=null;class a extends s.Z{static open(t=!1,e=!1,i=null,n="left",r=!0,o=s.Z.REMOVE_OFF_CANVAS_DELAY(),a=!1,l=""){if(!t)throw new Error("A url must be given!");s.r._removeExistingOffCanvas();const c=s.r._createOffCanvas(n,a,l,r);this.setContent(t,e,i,r,o),s.r._openOffcanvas(c)}static setContent(t,e,i,s,l){const c=new n.Z;super.setContent(`<div class="offcanvas-body">${r.Z.getTemplate()}</div>`,s,l),o&&o.abort();const u=t=>{super.setContent(t,s,l),"function"==typeof i&&i(t)};o=e?c.post(t,e,a.executeCallback.bind(this,u)):c.get(t,a.executeCallback.bind(this,u))}static executeCallback(t,e){"function"==typeof t&&t(e),window.PluginManager.initializePlugins()}}},3637:(t,e,i)=>{i.d(e,{Z:()=>u,r:()=>c});var s=i(9658),n=i(2005),r=i(1966);const o="offcanvas",a=350;class l{constructor(){this.$emitter=new n.Z}open(t,e,i,s,n,r,o){this._removeExistingOffCanvas();const a=this._createOffCanvas(i,r,o,s);this.setContent(t,s,n),this._openOffcanvas(a,e)}setContent(t,e,i){const s=this.getOffCanvas();s[0]&&(s[0].innerHTML=t,this._registerEvents(i))}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${o}`)}close(t){const e=this.getOffCanvas();r.Z.iterate(e,(t=>{bootstrap.Offcanvas.getInstance(t).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})}),t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){l.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){const e=s.Z.isTouchDevice()?"touchend":"click",i=this.getOffCanvas();r.Z.iterate(i,(e=>{const s=()=>{setTimeout((()=>{e.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:i})}),t),e.removeEventListener("hide.bs.offcanvas",s)};e.addEventListener("hide.bs.offcanvas",s)})),window.addEventListener("popstate",this.close.bind(this,t),{once:!0});const n=document.querySelectorAll(".js-offcanvas-close");r.Z.iterate(n,(i=>i.addEventListener(e,this.close.bind(this,t))))}_removeExistingOffCanvas(){l.bsOffcanvas=null;const t=this.getOffCanvas();return r.Z.iterate(t,(t=>t.remove()))}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,i,s){const n=document.createElement("div");if(n.classList.add(o),n.classList.add(this._getPositionClass(t)),!0===e&&n.classList.add("is-fullwidth"),i){const t=typeof i;if("string"===t)n.classList.add(i);else{if(!Array.isArray(i))throw new Error(`The type "${t}" is not supported. Please pass an array or a string.`);i.forEach((t=>{n.classList.add(t)}))}}return document.body.appendChild(n),l.bsOffcanvas=new bootstrap.Offcanvas(n,{backdrop:!1!==s||"static"}),n}}const c=Object.freeze(new l);class u{static open(t,e=null,i="left",s=!0,n=350,r=!1,o=""){c.open(t,e,i,s,n,r,o)}static setContent(t,e=!0,i=350){c.setContent(t,e,i)}static setAdditionalClassName(t){c.setAdditionalClassName(t)}static close(t=350){c.close(t)}static exists(){return c.exists()}static getOffCanvas(){return c.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return a}}},6565:(t,e,i)=>{var s,n,r,o=i(6285),a=i(9068),l=i(1966);class c extends o.Z{init(){window.Nosto={addProductToCart:(t,e,i)=>{this._addMultipleToCart([{productId:t,skuId:t,quantity:i}],e)},addMultipleProductsToCart:(t,e)=>{this._addMultipleToCart(t,e)},addSkuToCart:(t,e,i)=>{const s={quantity:i};this._addMultipleToCart([{...t,...s}],e)}},this._nostoElementId=this.el.nextElementSibling.id?this.el.nextElementSibling.id:""}_resolveContextSlotId(t){return t&&t.closest(".nosto_element")&&t.closest(".nosto_element").getAttribute("id")?t.closest(".nosto_element").getAttribute("id"):this._nostoElementId}_addMultipleToCart(t,e){const i={lineItems:{},redirectTo:this.options.redirectTo};t.forEach((t=>{i.lineItems[t.skuId]={id:t.skuId,quantity:Number.isInteger(t.quantity)?t.quantity:1,type:"product",referencedId:t.skuId,stackable:1,removable:1},this.$emitter.publish("addRecommendationToCart",{productId:t.productId,elementId:this._resolveContextSlotId(e)})})),this._openOffCanvasCarts(this.options.action,JSON.stringify(i))}_openOffCanvasCarts(t,e){const i=a.Z.getPluginInstances("OffCanvasCart");l.Z.iterate(i,(i=>this._openOffCanvasCart(i,t,e)))}_openOffCanvasCart(t,e,i){t.openOffCanvas(e,i,(()=>{this.$emitter.publish("openOffCanvasCart")}))}}s=c,r={redirectTo:"frontend.cart.offcanvas",action:"/checkout/line-item/add"},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r;var u=i(6656),h=i(3206);class p{static setCookie(t,e,i){var s="";if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),s="; expires="+n.toUTCString()}document.cookie=t+"="+(e||"")+s+"; path=/"}static getCookie(t){for(var e=t+"=",i=document.cookie.split(";"),s=0;s<i.length;s++){for(var n=i[s];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null}}class d extends o.Z{init(){if(p.getCookie("nosto-integration-track-allow")){if(this.storage=u.Z,this.options.initializeAfter)return null!==this.storage.getItem(this.options.nostoInitializedStorageKey)?this._initNosto():this.registerEvents();this._initNosto()}}onNostoCookieConsentAllowed(){this._initNosto()}registerEvents(){window.addEventListener("scroll",this._prepareForInitialization.bind(this),{once:!0})}_prepareForInitialization(){this.storage.setItem(this.options.nostoInitializedStorageKey,""),this._initNosto()}_initNosto(){const t="nostojs";if(window[t]=window[t]||function(e){(window[t].q=window[t].q||[]).push(e)},this.options.accountID){const t=document.createElement("script");t.type="text/javascript",t.setAttribute("async",!0),t.src="//connect.nosto.com/include/"+this.options.accountID,t.onload=()=>{this.$emitter.publish("scriptLoaded")},document.body.appendChild(t),this.registerSubscribers()}}registerSubscribers(){this._cartWidgetElement=h.Z.querySelector(document,"[data-cart-widget]",!1),this._cartWidget=!1!==this._cartWidgetElement&&window.PluginManager.getPluginInstanceFromElement(this._cartWidgetElement,"CartWidget"),this.cartWidgetSubscriber(),this.nostoSubscriber()}cartWidgetSubscriber(){!1!==this._cartWidget&&this._cartWidget.$emitter.subscribe("fetch",(()=>{window.nostojs((t=>{t.resendCartTagging()}))}))}nostoSubscriber(){const t=window.PluginManager.getPluginInstances("NostoPlugin");l.Z.iterate(t,(t=>{t.$emitter.subscribe("addRecommendationToCart",(t=>{window.nostojs((e=>{e.recommendedProductAddedToCart(t.detail.productId,t.detail.elementId),this.options.reloadRecommendations&&e.loadRecommendations()}))}))}))}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(d,"options",{nostoInitializedStorageKey:"nostoInitializedStorageKey"});class f extends o.Z{init(){this.nostoSubscriber()}nostoSubscriber(){const t=window.PluginManager.getPluginInstances("NostoConfiguration");l.Z.iterate(t,(t=>{t.$emitter.subscribe("scriptLoaded",(()=>{p.getCookie("nosto-integration-track-allow")&&window.nostojs((t=>{t.getSearchSessionParams().then((function(t){p.setCookie("nosto-search-session-params",encodeURIComponent(JSON.stringify(t)),30)}))}))}))}))}}var g=i(3139);class v extends g.Z{_getDisabledFiltersParamsFromParams(t){const e=t.order,i=super._getDisabledFiltersParamsFromParams(t);return"nosto-recommendation"===e&&(i.order=e),i}}var m=i(1857),b=i.n(m),_=i(4699);class C extends _.Z{init(){this.resetState(),this._container=h.Z.querySelector(this.el,this.options.containerSelector),this._inputMin=h.Z.querySelector(this.el,this.options.inputMinSelector),this._inputMax=h.Z.querySelector(this.el,this.options.inputMaxSelector),this._timeout=null,this._hasError=!1,this.slider=document.createElement("div"),this._sliderContainer=h.Z.querySelector(this.el,this.options.sliderContainer),this._sliderContainer.prepend(this.slider);const t=this._inputMin.value.length?this._inputMin.value:this.options.minInputValue,e=this._inputMax.value.length?this._inputMax.value:this.options.maxInputValue,i=this.options.minInputValue,s=this.getMax();noUiSlider.create(this.slider,{start:[t,e],connect:!0,range:{min:i,max:s}}),this._registerEvents()}resetState(){h.Z.querySelector(this.el,this.options.sliderContainer).innerHTML=""}_registerEvents(){this.slider.noUiSlider.on("update",this.onUpdateValues.bind(this)),this.slider.noUiSlider.on("end",this._onChangeInput.bind(this)),this._inputMin.addEventListener("blur",this._onChangeMin.bind(this)),this._inputMax.addEventListener("blur",this._onChangeMax.bind(this)),this._inputMin.addEventListener("keyup",this._onInput.bind(this)),this._inputMax.addEventListener("keyup",this._onInput.bind(this))}getMax(){return this.options.maxInputValue===this.options.minInputValue?this.options.minInputValue+1:this.options.maxInputValue}getValues(){const t={};return this.validateMinInput(),this.validateMaxInput(),this.hasMinValueSet()&&(t[this.options.minKey]=this._inputMin.value),this.hasMaxValueSet()&&(t[this.options.maxKey]=this._inputMax.value),t}_onInput(t){13===t.keyCode&&t.target.blur()}_onChangeInput(){clearTimeout(this._timeout),this._timeout=setTimeout((()=>{this._isInputInvalid()?this._setError():this._removeError(),this.listing.changeListing()}),this.options.inputTimeout)}_isInputInvalid(){return parseInt(this._inputMin.value)>parseInt(this._inputMax.value)}_getErrorMessageTemplate(){return`<div class="${this.options.errorContainerClass}">${this.options.snippets.filterRangeErrorMessage}</div>`}_setError(){this._hasError||(this._inputMin.classList.add(this.options.inputInvalidCLass),this._inputMax.classList.add(this.options.inputInvalidCLass),this._container.insertAdjacentHTML("afterend",this._getErrorMessageTemplate()),this._hasError=!0)}_removeError(){this._inputMin.classList.remove(this.options.inputInvalidCLass),this._inputMax.classList.remove(this.options.inputInvalidCLass);const t=h.Z.querySelector(this.el,`.${this.options.errorContainerClass}`,!1);t&&t.remove(),this._hasError=!1}getLabels(){let t=[];return this._inputMin.value.length||this._inputMax.value.length?(this.hasMinValueSet()&&t.push({label:`${this.options.snippets.filterRangeActiveMinLabel} ${this._inputMin.value} ${this.options.unit}`,id:this.options.minKey}),this.hasMaxValueSet()&&t.push({label:`${this.options.snippets.filterRangeActiveMaxLabel} ${this._inputMax.value} ${this.options.unit}`,id:this.options.maxKey})):t=[],t}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach((i=>{i===this.options.minKey&&(this._inputMin.value=t[i],this.validateMinInput(),e=!0),i===this.options.maxKey&&(this._inputMax.value=t[i],this.validateMaxInput(),e=!0)})),e}onUpdateValues(t){t[0]<this.options.minInputValue&&(t[0]=this.options.minInputValue),t[1]>this.options.maxInputValue&&(t[1]=this.options.maxInputValue),this._inputMin.value=t[0],this._inputMax.value=t[1]}reset(t){t===this.options.minKey&&this.resetMin(),t===this.options.maxKey&&this.resetMax(),this._removeError()}resetAll(){this.resetMin(),this.resetMax(),this._removeError()}validateMinInput(){!this._inputMin.value||this._inputMin.value<this.options.minInputValue||this._inputMin.value>this.options.maxInputValue?this.resetMin():this.setMinKnobValue()}validateMaxInput(){!this._inputMax.value||this._inputMax.value>this.options.maxInputValue||this._inputMax.value<this.options.minInputValue?this.resetMax():this.setMaxKnobValue()}resetMin(){this._inputMin.value=this.options.minInputValue,this.setMinKnobValue()}resetMax(){this._inputMax.value=this.options.maxInputValue,this.setMaxKnobValue()}_onChangeMin(){this.setMinKnobValue(),this._onChangeInput()}_onChangeMax(){this.setMaxKnobValue(),this._onChangeInput()}hasMinValueSet(){return this.validateMinInput(),this._inputMin.value.length&&parseFloat(this._inputMin.value)>this.options.minInputValue}hasMaxValueSet(){return this.validateMaxInput(),this._inputMax.value.length&&parseFloat(this._inputMax.value)<this.options.maxInputValue}setMinKnobValue(){this.slider&&this.slider.noUiSlider.set([this._inputMin.value,null])}setMaxKnobValue(){this.slider&&this.slider.noUiSlider.set([null,this._inputMax.value])}setBothKnobValues(){this.slider&&this.slider.noUiSlider.set([this._inputMin.value,this._inputMax.value])}refreshDisabledState(t){const e=t[this.options.name].entities;if(!e||!e.length)return void this.disableFilter();const i=e.find((t=>t.translated.name===this.options.propertyName));if(!i)return void this.disableFilter();const s=this.getValues(),n={min:i.options[0].min,max:i.options[0].max};n.min!==n.max?this.options.minInputValue!==n.min||this.options.maxInputValue!==n.max?(this.updateMinAndMaxValues(n.min,n.max),this.updateSelectedRange(s,n),this.enableFilter()):this.enableFilter():this.disableFilter()}updateMinAndMaxValues(t,e){this.options.minInputValue=t,this.options.maxInputValue=e,this.slider.noUiSlider.updateOptions({range:{min:t,max:e}}),this.updateInputsAndSliderValues(t,e)}updateInputsAndSliderValues(t,e){null!==t&&(this._inputMin.value=t),null!==e&&(this._inputMax.value=e),this.setBothKnobValues()}updateSelectedRange(t,e){const i=t[this.options.minKey],s=t[this.options.maxKey],n=i&&i>=e.min?i:null,r=s&&s<=e.max?s:null;this.updateInputsAndSliderValues(n,r)}disableFilter(){const t=h.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.add("fl-disabled"),t.setAttribute("disabled","disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){const t=h.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.remove("fl-disabled"),t.removeAttribute("disabled"),t.removeAttribute("title")}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(C,"options",b()(_.Z.options,{mainFilterButtonSelector:".filter-panel-item-toggle",sliderContainer:".nosto--range-slider",minInputValue:0,maxInputValue:null,unit:""}));var y=i(3629);class S extends y.Z{refreshDisabledState(t){if(""===this.options.propertyName)return;const e=[],i=t[this.options.name].entities;if(!i||!i.length)return void this.disableFilter();const s=i.find((t=>t.translated.name===this.options.propertyName));if(!s)return void this.disableFilter();e.push(...s.options);const n=this.getValues();e.length<1&&0===n[this.options.name].length?this.disableFilter():(this.enableFilter(),this._disableInactiveFilterOptions(e.map((t=>t.id))))}}var E=i(8553);document.$emitter.subscribe(E.Du,(function(t){t.detail["nosto-integration-track-allow"]&&l.Z.iterate(window.PluginManager.getPluginInstances("NostoConfiguration"),(t=>{t.onNostoCookieConsentAllowed()}))}));const M=window.PluginManager;M.register("NostoPlugin",c,"[data-nosto-cart-plugin]"),M.register("NostoConfiguration",d,"[data-nosto-configuration]"),M.register("NostoSearchSessionParams",f,"[data-nosto-search-session-params]"),M.override("Listing",v,"[data-listing]"),M.override("FilterRange",C,"[data-filter-range]"),M.override("FilterPropertySelect",S,"[data-filter-property-select]")}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=6565,t(t.s=e);var e}));t.O()}]);