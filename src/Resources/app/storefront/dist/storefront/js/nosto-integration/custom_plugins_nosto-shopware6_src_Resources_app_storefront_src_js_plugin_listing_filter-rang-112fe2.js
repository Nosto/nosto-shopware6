"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["custom_plugins_nosto-shopware6_src_Resources_app_storefront_src_js_plugin_listing_filter-rang-112fe2"],{857:t=>{var e=function(t){var e;return!!t&&"object"==typeof t&&"[object RegExp]"!==(e=Object.prototype.toString.call(t))&&"[object Date]"!==e&&t.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a(Array.isArray(t)?[]:{},t,e):t}function s(t,e,i){return t.concat(e).map(function(t){return n(t,i)})}function r(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[])}function o(t,e){try{return e in t}catch(t){return!1}}function a(t,i,l){(l=l||{}).arrayMerge=l.arrayMerge||s,l.isMergeableObject=l.isMergeableObject||e,l.cloneUnlessOtherwiseSpecified=n;var u,h,p=Array.isArray(i);return p!==Array.isArray(t)?n(i,l):p?l.arrayMerge(t,i,l):(h={},(u=l).isMergeableObject(t)&&r(t).forEach(function(e){h[e]=n(t[e],u)}),r(i).forEach(function(e){(!o(t,e)||Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))&&(o(t,e)&&u.isMergeableObject(i[e])?h[e]=(function(t,e){if(!e.customMerge)return a;var i=e.customMerge(t);return"function"==typeof i?i:a})(e,u)(t[e],i[e],u):h[e]=n(i[e],u))}),h)}a.all=function(t,e){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,i){return a(t,i,e)},{})},t.exports=a},261:(t,e,i)=>{i.r(e),i.d(e,{default:()=>l});var n=i(857),s=i.n(n),r=i(49),o=i(304);class a extends o.Z{init(){this._container=r.Z.querySelector(this.el,this.options.containerSelector),this._inputMin=r.Z.querySelector(this.el,this.options.inputMinSelector),this._inputMax=r.Z.querySelector(this.el,this.options.inputMaxSelector),this._timeout=null,this._hasError=!1,this._registerEvents()}_registerEvents(){this._inputMin.addEventListener("input",this._onChangeInput.bind(this)),this._inputMax.addEventListener("input",this._onChangeInput.bind(this))}_onChangeInput(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this._isInputInvalid()?this._setError(this._getErrorMessageTemplate("filterRangeErrorMessage")):this._isInputLowerBoundInvalid()?this._setError(this._getErrorMessageTemplate("filterRangeLowerBoundErrorMessage")):this._removeError(),this.listing.changeListing()},this.options.inputTimeout)}getValues(){let t={};return t[this.options.minKey]=this._inputMin.value,t[this.options.maxKey]=this._inputMax.value,t}_isInputInvalid(){return parseFloat(this._inputMin.value)>parseFloat(this._inputMax.value)}_isInputLowerBoundInvalid(){return parseFloat(this._inputMin.value)<this.options.lowerBound||parseFloat(this._inputMax.value)<this.options.lowerBound}_getErrorMessageTemplate(t){return'<div class="'.concat(this.options.errorContainerClass,'">').concat(this.options.snippets[t],"</div>")}_setError(t){this._hasError||(this._inputMin.classList.add(this.options.inputInvalidCLass),this._inputMax.classList.add(this.options.inputInvalidCLass),this._container.insertAdjacentHTML("afterend",t),this._hasError=!0)}_removeError(){this._inputMin.classList.remove(this.options.inputInvalidCLass),this._inputMax.classList.remove(this.options.inputInvalidCLass);let t=r.Z.querySelector(this.el,".".concat(this.options.errorContainerClass),!1);t&&t.remove(),this._hasError=!1}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach(i=>{i===this.options.minKey&&(this._inputMin.value=t[i],e=!0),i===this.options.maxKey&&(this._inputMax.value=t[i],e=!0)}),e}getLabels(){let t=[];return this._inputMin.value.length||this._inputMax.value.length?(this._inputMin.value.length&&t.push({label:"".concat(this.options.snippets.filterRangeActiveMinLabel," ").concat(this._inputMin.value," ").concat(this.options.unit),id:this.options.minKey}),this._inputMax.value.length&&t.push({label:"".concat(this.options.snippets.filterRangeActiveMaxLabel," ").concat(this._inputMax.value," ").concat(this.options.unit),id:this.options.maxKey})):t=[],t}reset(t){t===this.options.minKey&&(this._inputMin.value=""),t===this.options.maxKey&&(this._inputMax.value=""),this._removeError()}resetAll(){this._inputMin.value="",this._inputMax.value="",this._removeError()}}a.options=s()(o.Z.options,{inputMinSelector:".min-input",inputMaxSelector:".max-input",inputInvalidCLass:"is-invalid",inputTimeout:500,minKey:"min-price",maxKey:"max-price",lowerBound:0,unit:"â‚¬",errorContainerClass:"filter-range-error",containerSelector:".filter-range-container",snippets:{filterRangeActiveMinLabel:"",filterRangeActiveMaxLabel:"",filterRangeErrorMessage:"",filterRangeLowerBoundErrorMessage:""}});class l extends a{init(){if(!this.options.shouldExtend){super.init();return}this.resetState(),this._container=r.Z.querySelector(this.el,this.options.containerSelector),this._inputMin=r.Z.querySelector(this.el,this.options.inputMinSelector),this._inputMax=r.Z.querySelector(this.el,this.options.inputMaxSelector),this._timeout=null,this._hasError=!1,this.slider=document.createElement("div"),this._sliderContainer=r.Z.querySelector(this.el,this.options.sliderContainer),this._sliderContainer.prepend(this.slider);let t=this._inputMin.value.length?this._inputMin.value:this.options.minInputValue,e=this._inputMax.value.length?this._inputMax.value:this.options.maxInputValue,i=this.options.minInputValue,n=this.getMax();noUiSlider.create(this.slider,{start:[t,e],connect:!0,range:{min:i,max:n}}),this._registerEvents()}resetState(){r.Z.querySelector(this.el,this.options.sliderContainer).innerHTML=""}_registerEvents(){if(!this.options.shouldExtend){super._registerEvents();return}this.slider.noUiSlider.on("update",this.onUpdateValues.bind(this)),this.slider.noUiSlider.on("end",this._onChangeKnob.bind(this)),this._inputMin.addEventListener("blur",this._onChangeMin.bind(this)),this._inputMax.addEventListener("blur",this._onChangeMax.bind(this)),this._inputMin.addEventListener("keyup",this._onInput.bind(this)),this._inputMax.addEventListener("keyup",this._onInput.bind(this))}getMax(){return this.options.maxInputValue===this.options.minInputValue?this.options.minInputValue+1:this.options.maxInputValue}getValues(){if(!this.options.shouldExtend)return super.getValues();let t={};return this.validateMinInput(),this.validateMaxInput(),this.hasMinValueSet()&&(t[this.options.minKey]=this._inputMin.value),this.hasMaxValueSet()&&(t[this.options.maxKey]=this._inputMax.value),t}_onInput(t){13===t.keyCode&&t.target.blur()}getLabels(){if(!this.options.shouldExtend)return super.getLabels();let t=[];return this._inputMin.value.length||this._inputMax.value.length?(this.hasMinValueSet()&&t.push({label:"".concat(this.options.snippets.filterRangeActiveMinLabel," ").concat(this._inputMin.value," ").concat(this.options.unit),id:this.options.minKey}),this.hasMaxValueSet()&&t.push({label:"".concat(this.options.snippets.filterRangeActiveMaxLabel," ").concat(this._inputMax.value," ").concat(this.options.unit),id:this.options.maxKey})):t=[],t}setValuesFromUrl(t){if(!this.options.shouldExtend)return super.setValuesFromUrl(t);let e=!1;return Object.keys(t).forEach(i=>{i===this.options.minKey&&(this._inputMin.value=t[i],this.validateMinInput(),e=!0),i===this.options.maxKey&&(this._inputMax.value=t[i],this.validateMaxInput(),e=!0)}),e}onUpdateValues(t){t[0]<this.options.minInputValue&&(t[0]=this.options.minInputValue),t[1]>this.options.maxInputValue&&(t[1]=this.options.maxInputValue),this._inputMin.value=t[0],this._inputMax.value=t[1]}reset(t){if(!this.options.shouldExtend){super.reset(t);return}t===this.options.minKey&&this.resetMin(),t===this.options.maxKey&&this.resetMax(),this._removeError()}resetAll(){if(!this.options.shouldExtend){super.resetAll();return}this.resetMin(),this.resetMax(),this._removeError()}validateMinInput(){!this._inputMin.value||this._inputMin.value<this.options.minInputValue||this._inputMin.value>this.options.maxInputValue?this.resetMin():this.setMinKnobValue()}validateMaxInput(){!this._inputMax.value||this._inputMax.value>this.options.maxInputValue||this._inputMax.value<this.options.minInputValue?this.resetMax():this.setMaxKnobValue()}resetMin(){this._inputMin.value=this.options.minInputValue,this.setMinKnobValue()}resetMax(){this._inputMax.value=this.options.maxInputValue,this.setMaxKnobValue()}_onChangeMin(){this.setMinKnobValue(),this._onChangeInput()}_onChangeMax(){this.setMaxKnobValue(),this._onChangeInput()}_onChangeKnob(){this.listing.changeListing(!0,{p:1})}hasMinValueSet(){return this.validateMinInput(),this._inputMin.value.length&&parseFloat(this._inputMin.value)>this.options.minInputValue}hasMaxValueSet(){return this.validateMaxInput(),this._inputMax.value.length&&parseFloat(this._inputMax.value)<this.options.maxInputValue}setMinKnobValue(){this.slider&&this.slider.noUiSlider.set([this._inputMin.value,null])}setMaxKnobValue(){this.slider&&this.slider.noUiSlider.set([null,this._inputMax.value])}setBothKnobValues(){this.slider&&this.slider.noUiSlider.set([this._inputMin.value,this._inputMax.value])}refreshDisabledState(t){if(!this.options.shouldExtend)return;let e=t[this.options.name].entities;if(!e||!e.length){this.disableFilter();return}let i=e.find(t=>t.translated.name===this.options.propertyName);if(!i){this.disableFilter();return}let n=this.getValues(),s={min:i.options[0].min,max:i.options[0].max};if(s.min===s.max){this.disableFilter();return}if(this.options.minInputValue!==s.min||this.options.maxInputValue!==s.max)this.updateMinAndMaxValues(s.min,s.max);else{this.enableFilter();return}this.updateSelectedRange(n,s),this.enableFilter()}updateMinAndMaxValues(t,e){this.options.minInputValue=t,this.options.maxInputValue=e,this.slider.noUiSlider.updateOptions({range:{min:t,max:e}}),this.updateInputsAndSliderValues(t,e)}updateInputsAndSliderValues(t,e){null!==t&&(this._inputMin.value=t),null!==e&&(this._inputMax.value=e),this.setBothKnobValues()}updateSelectedRange(t,e){let i=t[this.options.minKey],n=t[this.options.maxKey],s=i&&i>=e.min,r=n&&n<=e.max;this.updateInputsAndSliderValues(s?i:null,r?n:null)}disableFilter(){let t=r.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.add("fl-disabled"),t.setAttribute("disabled","disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){let t=r.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.remove("fl-disabled"),t.removeAttribute("disabled"),t.removeAttribute("title")}}l.options=s()(a.options,{mainFilterButtonSelector:".filter-panel-item-toggle",sliderContainer:".nosto--range-slider",minInputValue:0,maxInputValue:null,unit:"",shouldExtend:!1})},49:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(140);class s{static isNode(t){return"object"==typeof t&&null!==t&&(t===document||t===window||t instanceof Node)}static hasAttribute(t,e){if(!s.isNode(t))throw Error("The element must be a valid HTML Node!");return"function"==typeof t.hasAttribute&&t.hasAttribute(e)}static getAttribute(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!1===s.hasAttribute(t,e))throw Error('The required property "'.concat(e,'" does not exist!'));if("function"!=typeof t.getAttribute){if(i)throw Error("This node doesn't support the getAttribute function!");return}return t.getAttribute(e)}static getDataAttribute(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=e.replace(/^data(|-)/,""),o=n.Z.toLowerCamelCase(r,"-");if(!s.isNode(t)){if(i)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===t.dataset){if(i)throw Error("This node doesn't support the dataset attribute!");return}let a=t.dataset[o];if(void 0===a){if(i)throw Error('The required data attribute "'.concat(e,'" does not exist on ').concat(t,"!"));return a}return n.Z.parsePrimitive(a)}static querySelector(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!s.isNode(t))throw Error("The parent node is not a valid HTML Node!");let n=t.querySelector(e)||!1;if(i&&!1===n)throw Error('The required element "'.concat(e,'" does not exist in parent node!'));return n}static querySelectorAll(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!s.isNode(t))throw Error("The parent node is not a valid HTML Node!");let n=t.querySelectorAll(e);if(0===n.length&&(n=!1),i&&!1===n)throw Error('At least one item of "'.concat(e,'" must exist in parent node!'));return n}}},830:(t,e,i)=>{i.d(e,{Z:()=>n});class n{publish(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new CustomEvent(t,{detail:e,cancelable:i});return this.el.dispatchEvent(n),n}subscribe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,s=t.split("."),r=i.scope?e.bind(i.scope):e;if(i.once&&!0===i.once){let e=r;r=function(i){n.unsubscribe(t),e(i)}}return this.el.addEventListener(s[0],r),this.listeners.push({splitEventName:s,opts:i,cb:r}),!0}unsubscribe(t){let e=t.split(".");return this.listeners=this.listeners.reduce((t,i)=>([...i.splitEventName].sort().toString()===e.sort().toString()?this.el.removeEventListener(i.splitEventName[0],i.cb):t.push(i),t),[]),!0}reset(){return this.listeners.forEach(t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}}},140:(t,e,i)=>{i.d(e,{Z:()=>n});class n{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){let i=n.toUpperCamelCase(t,e);return n.lcFirst(i)}static toUpperCamelCase(t,e){return e?t.split(e).map(t=>n.ucFirst(t.toLowerCase())).join(""):n.ucFirst(t.toLowerCase())}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}},568:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(857),s=i.n(n),r=i(49),o=i(140),a=i(830);class l{init(){throw Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){let e=o.Z.toDashCase(this._pluginName),i=r.Z.getDataAttribute(this.el,"data-".concat(e,"-config"),!1),n=r.Z.getAttribute(this.el,"data-".concat(e,"-options"),!1),a=[this.constructor.options,this.options,t];i&&a.push(window.PluginConfigManager.get(this._pluginName,i));try{n&&a.push(JSON.parse(n))}catch(t){throw console.error(this.el),Error('The data attribute "data-'.concat(e,'-options" could not be parsed to json: ').concat(t.message))}return s().all(a.filter(t=>t instanceof Object&&!(t instanceof Array)).map(t=>t||{}))}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}constructor(t,e={},i=!1){if(!r.Z.isNode(t))throw Error("There is no valid element given.");this.el=t,this.$emitter=new a.Z(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}}},304:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(568),s=i(49);class r extends n.Z{_init(){super._init(),this._validateMethods();let t=s.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(t,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){let t=s.Z.querySelector(this.el,this.options.dropdownSelector,!1);t&&t.addEventListener("click",t=>{t.stopPropagation()})}_validateMethods(){if("function"!=typeof this.getValues)throw Error("[".concat(this._pluginName,'] Needs the method "getValues"\''));if("function"!=typeof this.getLabels)throw Error("[".concat(this._pluginName,'] Needs the method "getLabels"\''));if("function"!=typeof this.reset)throw Error("[".concat(this._pluginName,'] Needs the method "reset"\''));if("function"!=typeof this.resetAll)throw Error("[".concat(this._pluginName,'] Needs the method "resetAll"\''))}}r.options={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"}}}]);